<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>

    <style>
        *{
            padding: 0px;
            margin: 0px;
        }
        body ,html{
            width: 100%;
            height: 100%;
        }
        #contenter{
            width: 100%;
            height: 100%;
            background: url("img/bg.jpg");
            position: relative;
        }
        #contenter .img{
            width: 125px;
            height: 125px;
            position: absolute;
          border: 5px solid white;
            left: -150px;
            top: -150px;
            -webkit-transition: all 1s ease;
        }
        #next,#prove{
          width: 50px;
            height: 80px;
            position: absolute;
            top: 50%;
            margin-top:-40px;
            display: none;
   -webkit-transition: all 5s ease;
        }
        #prove{
            background: url("img/prev.png") no-repeat center white;
            left: 0;
        }
        #next{
            background: url("img/next.png") no-repeat center white;
            right: 0;
        }
        #contenter .img span{
            width: 125px;
            height: 125px;
            position: absolute;
            opacity: 0;
            -webkit-transition: opacity 1.5s ease;
        }
    </style>
</head>
<body>
<div id="contenter">

</div>
<div id="next"></div>
<div id="prove"></div>
<script>
    var iNow=0;
    var onext=document.getElementById('next');
    var oprove=document.getElementById('prove');
    var ocontenter=document.getElementById("contenter");
    var num=0;
    for(var i=0;i<24;i++){
        var oImg=new Image();
        oImg.onload=function(){
            num++;
            if(num==48)
            {
                loadsuccess();
            }
        }
        oImg.src='img/'+(i+1)+'.jpg';
    }
    for(var i=0;i<24;i++){
        var oImg=new Image();
        oImg.onload=function(){
            num++
            if(num==48)
            {
                loadsuccess();
            }
        }
        oImg.src='img/thumbs/'+(i+1)+'.jpg';
    }
    var index=0;
    function loadsuccess(){
        var colwidth=(ocontenter.offsetWidth-6*135)/7;
        var rowheight=(ocontenter.offsetHeight-4*135)/5;
         for(var i=0;i<4;i++)
         {
             for(var j=0;j<6;j++){
                 var oDiv=document.createElement("div");
                 oDiv.className="img";
                 oDiv.style.background='url(img/thumbs/'+(index+1)+'.jpg)';
             oDiv.pos={
                     left:j*(135+colwidth)+colwidth,
                     top:i*(135+rowheight)+rowheight
                 }
                 oDiv.rowCol={
                     row:i,
                     col:j
                 }
                // oDiv.style.left=j*(135+colwidth)+colwidth+'px';
                // oDiv.style.top=i*(135+rowheight)+rowheight+'px';
               //  var rotatedeg=parseInt(Math.random()*40-20);
                // oDiv.style.webkitTransform="rotate("+rotatedeg+"deg)";
                 oDiv.index=index;
                 oDiv.innerHTML='<span></span>';
                 oDiv.onclick=fn;
                 ocontenter.appendChild(oDiv);
                 index++;

             }
         }
        index--;
        var aDiv=ocontenter.getElementsByTagName('div');
        var time=setInterval(function(){
            aDiv[index].style.left=aDiv[index].pos.left+'px';
            aDiv[index].style.top=aDiv[index].pos.top+'px';
            var rotatedeg=parseInt(Math.random()*40-20);
            aDiv[index].style.WebkitTransform='rotate('+rotatedeg+'deg)'
            index--;
            if(index==-1)
            {
                clearInterval(time);
            }
        },100)
        var flag=true;
        var ospan;
        function fn(){
            if(flag==true){
                onext.style.display='block';
                oprove.style.display='block';
                var fnleft=(ocontenter.offsetWidth-750)/2;
                var fnheight=(ocontenter.offsetHeight-500)/2;
                for(var i=0;i<aDiv.length;i++){
                    aDiv[i].style.left=aDiv[i].rowCol.col*125+fnleft+'px';
                    aDiv[i].style.top=aDiv[i].rowCol.row*125+fnheight+'px';
                    aDiv[i].style.WebkitTransform='rotate(0deg)';
                    aDiv[i].style.border='1px solid white';
                    ospan=aDiv[i].getElementsByTagName('span')[0];
                  iNow=this.index;
                    ospan.style.opacity=1;
                    ospan.style.background='url(img/'+(this.index+1)+'.jpg'+')'+(-125*aDiv[i].rowCol.col)+'px '+(-125*aDiv[i].rowCol.row)+'px';
                }


            }
            else{
                 onext.style.display='none';
                oprove.style.display='none';
                for(var i=0;i<aDiv.length;i++){
                    aDiv[i].style.left=aDiv[i].pos.left+'px';
                    aDiv[i].style.top=aDiv[i].pos.top+'px';
                    var rotatedeg=parseInt(Math.random()*40-20);
                    aDiv[i].style.WebkitTransform='rotate('+rotatedeg+'deg)';
                    ospan=aDiv[i].getElementsByTagName('span')[0];
                    ospan.style.opacity=0;

                }

            }
            flag=!flag;

        }


        onext.onclick=function(){
            iNow++
            if(iNow==aDiv.length){
                iNow=0;
            }
            var arr=[];
            for(var i=0;i<24;i++){
                arr.push(i);
            }
            arr.sort(function(){
              return  Math.random()-0.5;
            });

         var now=0;
            var time2=setInterval(function(){
                var idx=arr.pop();
                now++;
                var ospan=aDiv[idx].getElementsByTagName('span')[0];
                ospan.style.background='url(img/'+(iNow+1)+'.jpg'+')'+(-125*aDiv[idx].rowCol.col)+'px '+(-125*aDiv[idx].rowCol.row)+'px';
                if(now==24){
                    clearInterval(time2);
                }
            },100)

        };
        oprove.onclick=function(){
            iNow--
            if(iNow<0){
                iNow=aDiv.length-1;
            }

            var arr=[];
            for(var i=0;i<24;i++){
                arr.push(i);
            }
            arr.sort(function(){
                return  Math.random()-0.5;
            });

            var now=0;
            var time2=setInterval(function(){
                var idx=arr.pop();
                now++;
                var ospan=aDiv[idx].getElementsByTagName('span')[0];
                ospan.style.background='url(img/'+(iNow+1)+'.jpg'+')'+(-125*aDiv[idx].rowCol.col)+'px '+(-125*aDiv[idx].rowCol.row)+'px';
                if(now==24){
                    clearInterval(time2);
                }
            },100)

        }
    }
</script>
</body>
</html>